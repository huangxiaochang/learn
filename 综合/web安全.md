web安全
========

web常见的攻击类型
================

## 1. xss,ssl攻击(javascript注入):

### 原理：
恶意代码未经处理，与网站正常代码混在一起，在页面中执行JavaScript代码片段来获取页面的敏感信息和让页面拒绝服务等。

### 攻击的方式：
- url中的参数。当我们通过获取url中的参数用于展示在页面时，可能会被xss攻击。
- jquery的append方法。正常的情况下，直接给一个标签的innerHTML属性赋值，对于JavaScript代码片段是不会得到执行的，但是jquery的append方法，当赋值中存在<script>脚本标签时，会执行该脚本的。
- 其他可以执行脚本的地方。如img标签onerror事件，href, src标签属性，css中的url()等等。

### 分类：
#### 存储型xss:
1. 攻击者将恶意代码提交(论坛发帖，评论等)到网站的数据中。
2. 用户打开网站，服务器讲数据库中的而已代码拼接到html中返回给浏览器。
3. 浏览器解析html,执行JavaScript，恶意代码得到执行从而实现了攻击。

#### 反射型xss:
1.攻击者构造出带有恶意代码的url，用户打开该url。
2.服务器将url中的恶意代码拼接到html，返回给浏览器。
3.浏览器解析html,执行JavaScript，恶意代码得到执行从而实现了攻击。
该类型主要是利用了通过url来进行传参数的特点，如网站的搜索等。

#### dom型xss
1. 攻击构造出带有恶意代码的url。
2. 用户打开，浏览器解析html,执行JavaScript，恶意代码得到执行从而实现了攻击。

该类型主要利用了前端利用url中的参数作为数据来源，然后对该参数进行相应的操作，可能会执行到该恶意代码。

### xss 攻击的预防
1. 转移输入的内容。如转移内容中的<, \等不安全字符。
2. 对于cookie，加上httpOnly的属性，这样恶意脚本就不能读取到cookie。
3. 对于页面中的src,href属性的赋值要防范,因为如果赋值javascript:开头，浏览器会把后面的内容当成JavaScript代码执行。
4. 当代码中使用eval,Function,innerHTML,document.write等方法时，要注意来源于用户输入的内容的安全性。

## CSRF攻击
跨站请求伪造。攻击者诱导受害者进入第三方网站（如：利用xss攻击，诱惑点击链接等方式），在第三方网站中，先攻击的网站发送跨站请求（请求时，会带上被攻击网站的cookie信息）。

### 攻击类型：
- get请求类型
- post请求类型（通常为隐藏的表单提交内容）
- 链接类型

### 应对：
- 增加token认证。
- 同源检测：请求头中的origin，referer字段值检测。
- 请求时带上验证码等。
- cookie增加httpOnly属性

## DDos攻击
意为分布式拒绝服务。一般是攻击者利用"肉鸡"对目标网站在较短时间内发起大量的请求，大规模消耗目标网站的主机资源。

### 攻击方式：
- SYN攻击类型：利用tcp的连接请求，客户端发送syn报文后，掉线，然后服务器收到请求后，会返回报文给客户端并且等待客户端确认，但是由于客户端已经掉线，所以服务器一般会等待一段的时间，所以这样会造成服务器资源的消耗。
- UDP攻击类型：利用UDP无连接状态，攻击者通常大量伪造小的UDP包进行冲击服务器。

### 应对：
- CDN加速。利用CDN服务将网站访问流量分配到各个节点上，这样便可以隐藏网站的真实ip.
- 高防服务器。
- 大数据分析，识别不正常的访问流量。

## 控制台注入
诱引受害者在浏览器的控制台中粘贴恶意的代码执行。

